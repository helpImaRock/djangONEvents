{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<footer class="d-flex justify-content-end align-items-center" style="position: fixed; bottom:0; right:0;height:100px;width:300px;">
    <form id='lang_form' class="btn-group dropup pr-5" action="{% url 'set_language' %}" method="post">{% csrf_token %}
      <input name="next" type="hidden" value="{{ redirect_to }}">
      <select name="language" >
            {% get_available_languages as LANGUAGES %}
            {% get_language_info_list for LANGUAGES as languages %}
            {% for language in languages %}
                <option class="btn-sm dropdown-toggle lang_choice" value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                    {{ language.name }} ({{ language.code }})
                </option>
            {% endfor %}
        </select>
    </form>
    <script>
      $( ".lang_choice" ).click(function() {
        $('#lang_form').submit()
      });
  </script>
</footer>