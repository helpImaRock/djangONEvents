{% extends "base.html" %}
{% load i18n %}
{% block content %}
{% if event %}
  
<div class="d-flex flex-column align-items-center py-3 mt-3" style="height: inherit">
    {% if event.author == request.user %}
      {% if event.state == 'DF' %}  
        <a href={% url 'event-update' event.id %}>{% translate 'update event' %}</a>
      {% endif %}
    {% endif %}
    <div class="card w-75" id={{event.pk}}>
      <div class="card-body">
        <h3 class="card-title">
          <p><u>{{event.title}}</u></p>
        </h3>
        <blockquote class="blockquote mt-3"></blockquote>
          <div id ="description">
              <p class="lead">{{event.description}}</p>
          </div>
        </blockquote>
      </div>
      
      {% include "events/components/event_detail.html" %}
    </div>
    <div class="p-3">
      
      {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
              <div class="alert alert-danger" role="alert">
                {{ message }}
              </div>
            {% else %}
              <div class="alert alert-info" role="alert">
                {{ message }}
              </div>
            {% endif %}
            {% endfor %}
        </ul>
      {% else %}
      {% if event.author == request.user %}
      <div class="container p-4">
        <h4 class="p-4">{% translate 'Subscriptions' %}</h4>
        {% include "subscriptions/sub_list.html" %}
      </div>
        {% else %}
        {% if subscription %}
          <div class="d-flex flex-column align-items-center">
            <div class="alert alert-info" role="alert">
              {% translate 'You are subscribed to this event' %}
            </div>
            <div class="p-4">
              <form action="{{event.id}}/sub/{{subscription.id }}/delete" method="post">{% csrf_token %}
                <button id="event_button" type="submit" class="btn btn-primary" value="Submit">{% translate 'Unsubscribe Event' %}</button>
              </form>
          </div>
          </div>
        {% else %}
          {% include "subscriptions/sub_create.html" %}
        {% endif %}
          
      {% endif %}
      {% endif %}
    </div>
    {% endif %}
    
</div>
{% endblock %}